<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Profile - C.Point</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <link rel="stylesheet" href="{{ url_for('static', filename='styles.css') }}?v=2.0">
    <style>
        /* Premium Dashboard Menu Styles */
        .profile-page { margin-left: 200px; }
        .profile-page .sidebar { position: fixed !important; top: 0 !important; left: 0 !important; width: 200px !important; height: 100vh !important; background: #1a1a1a !important; border-right: 1px solid #333333 !important; z-index: 1000 !important; display: flex !important; flex-direction: column !important; }
        .profile-page .sidebar-header { display: flex; align-items: center; padding: 10px; border-bottom: 1px solid #333333; height: 60px; box-sizing: border-box; }
        .profile-page .sidebar-logo { padding: 5px; display: flex; align-items: center; justify-content: center; flex-shrink: 0; }
        .profile-page .community-name { flex: 1; display: flex; align-items: center; color: #ffffff; font-size: 16px; font-weight: 600; padding-left: 10px; overflow: hidden; }
        .profile-page .community-name span { overflow: hidden; text-overflow: ellipsis; white-space: nowrap; }
        .profile-page .sidebar-menu { flex: 1; padding: 10px 0; display: block !important; overflow-y: auto !important; }
        .profile-page .sidebar-menu a { display: block !important; padding: 12px 20px !important; color: #ffffff !important; text-decoration: none !important; transition: all 0.3s ease !important; border: none !important; font-size: 14px !important; }
        .profile-page .sidebar-menu a:hover { background: rgba(77, 182, 172, 0.2) !important; color: #4db6ac !important; padding-left: 25px !important; }
        .profile-page .menu-btn, .profile-page .dropdown-content { display: none !important; }
        @media (max-width: 768px) {
            .profile-page { margin-left: 0 !important; padding-top: 60px !important; }
            .profile-page .sidebar { width: 100% !important; height: 60px !important; overflow: visible !important; }
            .profile-page .sidebar-header { padding: 8px !important; height: 60px !important; }
            .profile-page .community-name { font-size: 14px !important; }
            .profile-page .sidebar-menu { display: none !important; position: absolute !important; top: 60px !important; left: 0 !important; right: 0 !important; background: #1a1a1a !important; border-top: 1px solid #333333 !important; max-height: calc(100vh - 60px) !important; overflow-y: auto !important; }
            .profile-page .sidebar:hover .sidebar-menu, .profile-page .sidebar:focus-within .sidebar-menu { display: block !important; }
        }
        
        /* Profile Page Styles - Compact & Minimalist */
        body {
            background-color: #000000 !important;
            color: #ffffff !important;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            margin: 0;
            padding: 0;
            min-height: 100vh;
        }

        .profile-container {
            margin-left: 0;
            padding: 16px;
            max-width: 600px;
            margin: 0 auto;
            position: relative;
            background: #000000;
            min-height: 100vh;
        }

        @media (max-width: 768px) {
            .profile-container {
                margin-left: 0;
                padding: 12px;
                left: 0;
            }
        }

        .profile-header {
            margin-bottom: 20px;
            padding-bottom: 12px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        .profile-title {
            font-size: 18px;
            font-weight: 600;
            color: #ffffff;
            margin: 0 0 4px 0;
        }

        .profile-subtitle {
            color: rgba(255, 255, 255, 0.6);
            font-size: 12px;
            margin: 0;
        }

        /* Profile Sections - More Compact */
        .profile-section {
            background: #1a2526;
            border: 1px solid #4db6ac;
            border-radius: 8px;
            padding: 16px;
            margin-bottom: 16px;
        }

        /* Compact Section Styling */
        .profile-section.compact {
            padding: 12px;
            margin-bottom: 12px;
        }

        .profile-section.compact .section-header {
            margin-bottom: 10px;
        }

        .profile-section.compact .section-title {
            font-size: 15px;
        }

        .profile-section.compact .form-group {
            margin-bottom: 8px;
        }

        .profile-section.compact .form-label {
            font-size: 11px;
            margin-bottom: 3px;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .profile-section.compact .form-input,
        .profile-section.compact .form-select {
            padding: 6px 8px;
            font-size: 13px;
        }

        .profile-section.compact .form-row {
            gap: 8px;
            margin-bottom: 8px;
        }

        .profile-section.compact .btn {
            padding: 6px 14px;
            font-size: 12px;
        }

        .profile-section.compact .status-message {
            padding: 6px;
            font-size: 12px;
            margin-bottom: 8px;
        }

        .section-header {
            display: flex;
            align-items: center;
            gap: 8px;
            margin-bottom: 12px;
            padding-bottom: 8px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        .section-icon {
            color: #ffffff;
            font-size: 14px;
            background: #4db6ac;
            padding: 6px;
            border-radius: 4px;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            width: 20px;
            height: 20px;
        }

        .section-title {
            font-size: 14px;
            font-weight: 600;
            color: #ffffff;
            margin: 0;
        }

        /* Form Styles - More Compact */
        .form-group {
            margin-bottom: 12px;
        }

        .form-label {
            display: block;
            color: #ffffff;
            font-size: 12px;
            font-weight: 500;
            margin-bottom: 4px;
        }

        .form-input {
            width: 100%;
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 6px;
            padding: 8px 12px;
            color: #ffffff;
            font-size: 13px;
            transition: all 0.2s ease;
            box-sizing: border-box;
        }

        .form-input:focus {
            outline: none;
            border-color: #4db6ac;
            background: rgba(255, 255, 255, 0.08);
        }

        .form-input::placeholder {
            color: rgba(255, 255, 255, 0.5);
        }

        .form-select {
            width: 100%;
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 6px;
            padding: 8px 12px;
            color: #ffffff;
            font-size: 13px;
            transition: all 0.2s ease;
            cursor: pointer;
        }

        .form-select:focus {
            outline: none;
            border-color: #4db6ac;
            background: rgba(255, 255, 255, 0.08);
        }

        .form-select option {
            background: #1a2526;
            color: #ffffff;
        }

        .form-row {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 12px;
        }

        @media (max-width: 768px) {
            .form-row {
                grid-template-columns: 1fr;
            }
        }

        /* Button Styles - More Compact */
        .btn {
            background: #4db6ac;
            color: #ffffff;
            border: none;
            padding: 8px 16px;
            border-radius: 6px;
            font-size: 13px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.2s ease;
            display: inline-flex;
            align-items: center;
            gap: 6px;
        }

        .btn:hover {
            background: #37a69c;
            transform: translateY(-1px);
        }

        .btn:active {
            transform: translateY(0);
        }
        
        .view-profile-btn {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            padding: 10px 16px;
            background: transparent;
            color: #4db6ac;
            border: 1px solid #4db6ac;
            border-radius: 6px;
            text-decoration: none;
            font-size: 14px;
            margin-bottom: 16px;
            transition: all 0.2s ease;
        }
        
        .view-profile-btn:hover {
            background: rgba(77, 182, 172, 0.1);
            transform: translateY(-1px);
        }
        
        .checkbox-label {
            display: flex;
            align-items: center;
            gap: 8px;
            cursor: pointer;
            color: #e0e0e0;
        }
        
        .checkbox-label input[type="checkbox"] {
            width: 18px;
            height: 18px;
            cursor: pointer;
        }
        
        textarea.form-input {
            resize: vertical;
            min-height: 80px;
        }

        /* Status Messages - More Compact */
        .status-message {
            padding: 8px 12px;
            border-radius: 6px;
            margin-bottom: 12px;
            font-size: 12px;
            display: none;
        }

        .status-success {
            background: rgba(76, 182, 172, 0.2);
            border: 1px solid #4db6ac;
            color: #4db6ac;
        }

        .status-error {
            background: rgba(255, 107, 107, 0.2);
            border: 1px solid #ff6b6b;
            color: #ff6b6b;
        }

        /* Current Info Display - More Compact */
        .current-info {
            background: rgba(255, 255, 255, 0.03);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 6px;
            padding: 12px;
            margin-bottom: 12px;
        }

        .info-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 6px 0;
            border-bottom: 1px solid rgba(255, 255, 255, 0.05);
        }

        .info-item:last-child {
            border-bottom: none;
        }

        .info-label {
            color: rgba(255, 255, 255, 0.7);
            font-size: 12px;
        }

        .info-value {
            color: #ffffff;
            font-size: 12px;
            font-weight: 500;
        }

        .subscription-badge {
            background: #4db6ac;
            color: #ffffff;
            padding: 3px 8px;
            border-radius: 10px;
            font-size: 10px;
            font-weight: 500;
            text-transform: uppercase;
        }

        .subscription-badge.free {
            background: rgba(255, 255, 255, 0.2);
        }
    </style>
</head>
<body class="profile-page">
    <div class="sidebar">
        <div class="sidebar-header">
            <div class="sidebar-logo" id="sidebarLogo"></div>
            <div class="community-name">
                <span>Profile</span>
            </div>
        </div>
        <div class="sidebar-menu">
            {% if session['username'] == 'admin' %}
            <a href="{{ url_for('admin') }}">Admin Dashboard</a>
            <a href="{{ url_for('admin_profile') }}">Admin Profile</a>
            {% endif %}
            <a href="{{ url_for('profile') }}">Profile</a>
            <a href="{{ url_for('account_settings') }}">Account Settings</a>
            <a href="{{ url_for('user_chat') }}">Messages</a>
            <a href="/notifications" style="position: relative;">Notifications <span id="menuNotificationBadge" class="menu-notification-badge" style="display: none;">0</span></a>
            <a href="{{ url_for('premium_dashboard') }}">Main Dashboard</a>
            <a href="{{ url_for('feed') }}">Social</a>
            <a href="{{ url_for('communities') }}">Your Communities</a>
            <a href="{{ url_for('your_sports') }}">Your Sports</a>
            <a href="{{ url_for('logout') }}">Logout</a>
        </div>
    </div>
    <div class="profile-container">
        <!-- Header -->
        <div class="profile-header">
            <h1 class="profile-title">Profile</h1>
            <p class="profile-subtitle">Manage your account settings</p>
        </div>

        <!-- Account Settings Link -->
        <div class="profile-section compact">
            <div class="section-header">
                <i class="fas fa-cog section-icon"></i>
                <h2 class="section-title">Account Management</h2>
            </div>
            
            <p style="color: #9fb0b5; margin-bottom: 16px; font-size: 14px;">
                Manage your account information, email, and password settings.
            </p>
            
            <a href="{{ url_for('account_settings') }}" class="btn">
                <i class="fas fa-user-cog"></i>
                Go to Account Settings
            </a>
        </div>



        <!-- Public Profile -->
        <div class="profile-section compact">
            <div class="section-header">
                <i class="fas fa-globe section-icon"></i>
                <h2 class="section-title">Public Profile</h2>
            </div>
            
            <div class="profile-link">
                <a href="/profile/{{ username }}" target="_blank" class="view-profile-btn">
                    <i class="fas fa-external-link-alt"></i> View Public Profile
                </a>
            </div>
            
            <div id="publicProfileStatus" class="status-message"></div>
            
            <form id="publicProfileForm" action="/update_public_profile" method="POST" enctype="multipart/form-data">
                <!-- Profile Picture Upload -->
                <div class="form-group">
                    <label class="form-label">Profile Picture</label>
                    <div style="display: flex; align-items: center; gap: 16px; margin-bottom: 12px;">
                        <div id="profilePicturePreview" style="width: 80px; height: 80px; border-radius: 50%; background: rgba(255,255,255,0.05); border: 1px solid rgba(255,255,255,0.2); display: flex; align-items: center; justify-content: center; overflow: hidden;">
                            {% if user[19] %}
                                <img src="{{ url_for('static', filename=user[19]) }}" alt="Profile" style="width: 100%; height: 100%; object-fit: cover;">
                            {% else %}
                                <i class="fas fa-user" style="color: #9fb0b5; font-size: 32px;"></i>
                            {% endif %}
                        </div>
                        <div style="flex: 1;">
                            <input type="file" id="profilePictureInput" name="profile_picture" accept="image/*" class="form-input" style="display: none;">
                            <button type="button" onclick="document.getElementById('profilePictureInput').click()" class="btn btn-compact" style="margin-bottom: 8px;">
                                <i class="fas fa-camera"></i> Choose Photo
                            </button>
                            <p style="font-size: 11px; color: #9fb0b5; margin: 0;">JPG, PNG or GIF. Max 5MB.</p>
                        </div>
                    </div>
                </div>
                
                <div class="form-group">
                    <label class="form-label">Display Name</label>
                    <input type="text" name="display_name" class="form-input" 
                           value="{{ user[13] or '' }}" placeholder="Your display name">
                </div>
                
                <div class="form-group">
                    <label class="form-label">Bio</label>
                    <textarea name="bio" class="form-input" rows="4" 
                              placeholder="Tell people about yourself">{{ user[14] or '' }}</textarea>
                </div>
                
                <div class="form-group">
                    <label class="form-label">Location</label>
                    <input type="text" name="location" class="form-input" 
                           value="{{ user[15] or '' }}" placeholder="City, Country">
                </div>
                
                <div class="form-group">
                    <label class="form-label">Website</label>
                    <input type="url" name="website" class="form-input" 
                           value="{{ user[16] or '' }}" placeholder="https://yourwebsite.com">
                </div>
                
                <div class="form-row">
                    <div class="form-group">
                        <label class="form-label">Instagram</label>
                        <input type="text" name="instagram" class="form-input" 
                               value="{{ user[17] or '' }}" placeholder="@username">
                    </div>
                    <div class="form-group">
                        <label class="form-label">Twitter</label>
                        <input type="text" name="twitter" class="form-input" 
                               value="{{ user[18] or '' }}" placeholder="@username">
                    </div>
                    <div class="form-group">
                        <label class="checkbox-label" style="margin-top: 20px;">
                            <input type="checkbox" name="is_public" 
                                   {% if user[21] == 1 or user[21] is none %}checked{% endif %}>
                            <span>Public</span>
                        </label>
                    </div>
                </div>
                
                <button type="submit" class="btn">
                    <i class="fas fa-save"></i>
                    Update Public Profile
                </button>
            </form>
        </div>

        <!-- Professional Information -->
        <div class="profile-section compact">
            <div class="section-header">
                <i class="fas fa-briefcase section-icon"></i>
                <h2 class="section-title">Professional Information</h2>
            </div>
            
            <div id="professionalStatus" class="status-message"></div>
            
            <form id="professionalForm">
                <div class="form-row">
                    <div class="form-group">
                        <label class="form-label">Current Role</label>
                        <input type="text" id="role" class="form-input" placeholder="e.g. Software Engineer" value="{{ user.role or '' }}">
                    </div>
                    <div class="form-group">
                        <label class="form-label">Company</label>
                        <input type="text" id="company" class="form-input" placeholder="e.g. Tech Corp" value="{{ user.company or '' }}">
                    </div>
                    <div class="form-group">
                        <label class="form-label">Industry</label>
                        <select id="prof_industry" class="form-select">
                            <option value="">Select industry</option>
                            <option value="technology" {{ 'selected' if user.industry == 'technology' else '' }}>Technology</option>
                            <option value="healthcare" {{ 'selected' if user.industry == 'healthcare' else '' }}>Healthcare</option>
                            <option value="finance" {{ 'selected' if user.industry == 'finance' else '' }}>Finance</option>
                            <option value="education" {{ 'selected' if user.industry == 'education' else '' }}>Education</option>
                            <option value="retail" {{ 'selected' if user.industry == 'retail' else '' }}>Retail</option>
                            <option value="manufacturing" {{ 'selected' if user.industry == 'manufacturing' else '' }}>Manufacturing</option>
                            <option value="consulting" {{ 'selected' if user.industry == 'consulting' else '' }}>Consulting</option>
                            <option value="marketing" {{ 'selected' if user.industry == 'marketing' else '' }}>Marketing</option>
                            <option value="legal" {{ 'selected' if user.industry == 'legal' else '' }}>Legal</option>
                            <option value="government" {{ 'selected' if user.industry == 'government' else '' }}>Government</option>
                            <option value="non_profit" {{ 'selected' if user.industry == 'non_profit' else '' }}>Non-profit</option>
                            <option value="other" {{ 'selected' if user.industry == 'other' else '' }}>Other</option>
                        </select>
                    </div>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label class="form-label">Years of Experience</label>
                        <input type="number" id="experience" class="form-input" min="0" max="50" placeholder="0" value="{{ user.experience or '' }}">
                    </div>
                    <div class="form-group">
                        <label class="form-label">Degree</label>
                        <input type="text" id="degree" class="form-input" placeholder="e.g. Bachelor's in CS" value="{{ user.degree or '' }}">
                    </div>
                    <div class="form-group">
                        <label class="form-label">School/University</label>
                        <input type="text" id="school" class="form-input" placeholder="e.g. MIT" value="{{ user.school or '' }}">
                    </div>
                </div>

                <div class="form-row">
                    <div class="form-group" style="flex: 2;">
                        <label class="form-label">Skills (comma-separated)</label>
                        <input type="text" id="skills" class="form-input" placeholder="e.g. Python, Data Analysis, Project Management" value="{{ user.skills or '' }}">
                    </div>
                    <div class="form-group">
                        <label class="form-label">LinkedIn</label>
                        <input type="text" id="linkedin" class="form-input" placeholder="linkedin.com/in/..." value="{{ user.linkedin or '' }}">
                    </div>
                </div>
                
                <button type="submit" class="btn btn-compact">
                    <i class="fas fa-save"></i>
                    Save Professional Info
                </button>
            </form>
        </div>

        <!-- Personal Information -->
        <div class="profile-section compact">
            <div class="section-header">
                <i class="fas fa-user section-icon"></i>
                <h2 class="section-title">Personal Details</h2>
            </div>
            
            <div id="personalStatus" class="status-message"></div>
            
            <form id="personalForm">
                <div class="form-row">
                    <div class="form-group">
                        <label class="form-label">Age</label>
                        <input type="number" id="age" class="form-input" min="13" max="120" value="{{ user.age or '' }}">
                    </div>
                    <div class="form-group">
                        <label class="form-label">Gender</label>
                        <select id="gender" class="form-select">
                            <option value="">Select gender</option>
                            <option value="male" {{ 'selected' if user.gender == 'male' else '' }}>Male</option>
                            <option value="female" {{ 'selected' if user.gender == 'female' else '' }}>Female</option>
                            <option value="other" {{ 'selected' if user.gender == 'other' else '' }}>Other</option>
                            <option value="prefer_not_to_say" {{ 'selected' if user.gender == 'prefer_not_to_say' else '' }}>Prefer not to say</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Country</label>
                        <input type="text" id="country" class="form-input" value="{{ user.country or '' }}">
                    </div>
                    <div class="form-group">
                        <label class="form-label">City</label>
                        <input type="text" id="city" class="form-input" value="{{ user.city or '' }}">
                    </div>
                </div>
                
                <button type="submit" class="btn btn-compact">
                    <i class="fas fa-save"></i>
                    Save Personal Details
                </button>
            </form>
        </div>
    </div>

    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="{{ url_for('static', filename='script.js') }}"></script>
    <script>
        $(document).ready(function() {
            console.log('Profile page script loaded');
            // Premium dashboard menu doesn't need dropdown logic
        });

        // Password Update - Moved to Account Settings
        /* document.getElementById('passwordForm').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const currentPassword = document.getElementById('currentPassword').value;
            const newPassword = document.getElementById('newPassword').value;
            const confirmPassword = document.getElementById('confirmPassword').value;
            
            if (newPassword !== confirmPassword) {
                showStatus('passwordStatus', 'New passwords do not match', 'error');
                return;
            }
            
            if (newPassword.length < 6) {
                showStatus('passwordStatus', 'Password must be at least 6 characters long', 'error');
                return;
            }
            
            fetch('/update_password', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/x-www-form-urlencoded',
                    'X-CSRFToken': '{{ csrf_token }}'
                },
                body: `current_password=${encodeURIComponent(currentPassword)}&new_password=${encodeURIComponent(newPassword)}`
            })
            .then(response => response.json())
            .then(data => {
                if (data.success) {
                    showStatus('passwordStatus', 'Password updated successfully!', 'success');
                    document.getElementById('passwordForm').reset();
                } else {
                    showStatus('passwordStatus', data.error || 'Error updating password', 'error');
                }
            })
            .catch(error => {
                showStatus('passwordStatus', 'Error updating password', 'error');
            });
        }); */

        // Email Update Function - Moved to Account Settings
        /* function editEmail() {
            const currentEmail = '{{ user.email or "" }}';
            const newEmail = prompt('Enter new email address:', currentEmail);
            
            if (newEmail && newEmail !== currentEmail) {
                fetch('/update_email', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/x-www-form-urlencoded',
                        'X-CSRFToken': '{{ csrf_token }}'
                    },
                    body: `new_email=${encodeURIComponent(newEmail)}`
                })
                .then(response => response.json())
                .then(data => {
                    if (data.success) {
                        alert('Email updated successfully!');
                        location.reload(); // Refresh to show updated email
                    } else {
                        alert(data.error || 'Error updating email');
                    }
                })
                .catch(error => {
                    alert('Error updating email');
                });
            }
        } */

        // Professional Information Update
        document.getElementById('professionalForm').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const formData = new FormData();
            formData.append('role', document.getElementById('role').value);
            formData.append('company', document.getElementById('company').value);
            formData.append('industry', document.getElementById('prof_industry').value);
            formData.append('degree', document.getElementById('degree').value);
            formData.append('school', document.getElementById('school').value);
            formData.append('skills', document.getElementById('skills').value);
            formData.append('linkedin', document.getElementById('linkedin').value);
            formData.append('experience', document.getElementById('experience').value);
            
            fetch('/update_professional', {
                method: 'POST',
                body: formData
            })
            .then(response => response.json())
            .then(data => {
                if (data.success) {
                    showStatus('professionalStatus', 'Professional information updated successfully!', 'success');
                } else {
                    showStatus('professionalStatus', data.error || 'Error updating information', 'error');
                }
            })
            .catch(error => {
                showStatus('professionalStatus', 'Error updating information', 'error');
            });
        });

        // Personal Information Update
        document.getElementById('personalForm').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const formData = new FormData();
            formData.append('age', document.getElementById('age').value);
            formData.append('gender', document.getElementById('gender').value);
            formData.append('country', document.getElementById('country').value);
            formData.append('city', document.getElementById('city').value);
            formData.append('csrf_token', '{{ csrf_token }}');
            
            fetch('/update_personal_info', {
                method: 'POST',
                body: formData
            })
            .then(response => response.json())
            .then(data => {
                if (data.success) {
                    showStatus('personalStatus', 'Personal information updated successfully!', 'success');
                } else {
                    showStatus('personalStatus', data.error || 'Error updating personal information', 'error');
                }
            })
            .catch(error => {
                showStatus('personalStatus', 'Error updating personal information', 'error');
            });
        });

        // Profile Picture Preview
        document.getElementById('profilePictureInput').addEventListener('change', function(e) {
            const file = e.target.files[0];
            if (file) {
                // Check file size (5MB limit)
                if (file.size > 5 * 1024 * 1024) {
                    alert('File size must be less than 5MB');
                    e.target.value = '';
                    return;
                }
                
                // Check file type
                if (!file.type.startsWith('image/')) {
                    alert('Please select an image file');
                    e.target.value = '';
                    return;
                }
                
                // Preview the image
                const reader = new FileReader();
                reader.onload = function(e) {
                    const preview = document.getElementById('profilePicturePreview');
                    preview.innerHTML = `<img src="${e.target.result}" alt="Profile" style="width: 100%; height: 100%; object-fit: cover;">`;
                };
                reader.readAsDataURL(file);
            }
        });

        // Status message helper
        function showStatus(elementId, message, type) {
            const element = document.getElementById(elementId);
            element.textContent = message;
            element.className = `status-message status-${type}`;
            element.style.display = 'block';
            
            setTimeout(() => {
                element.style.display = 'none';
            }, 5000);
        }
    </script>
</body>
</html>
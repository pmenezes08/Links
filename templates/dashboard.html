<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Workout X - Dashboard</title>
	<link rel="stylesheet" href="{{ url_for('static', filename='styles.css') }}?v=2.0">
</head>
<body class="dashboard-page">
	<div class="sidebar">
		<button class="menu-btn">â˜° Menu</button>
		<div class="dropdown-content">
			{% if session['username'] == 'admin' %}
			<a href="/admin">Admin Dashboard</a>
			<a href="/admin_profile">Admin Profile</a>
			{% endif %}
			<a href="/profile">Profile</a>
			<a href="/user_chat">Messages</a>
			<a href="/premium_dashboard">Premium Dashboard</a>
			<a href="/feed">Social</a>
			<a href="/nutrition">Nutrition</a>
			<a href="/blood_test_analysis">Blood Test Analysis</a>
			<a href="/chat">Chat with Grok</a>
			<a href="/subscribe">Subscribe</a>
			<a href="/logout">Logout</a>
		</div>
	</div>
	<div class="container">
		<h1>Welcome, {{ name }}</h1>
		<div class="dashboard-actions">
			<button onclick="location.href='{{ url_for('feed') }}'" class="sleek-btn compact pill">Social</button>
			<button onclick="location.href='{{ url_for('free_workouts') }}'" class="sleek-btn compact pill">Free Workouts</button>
			<button onclick="location.href='{{ url_for('generate_workout_page') }}'" class="sleek-btn compact pill">Generate Workout</button>
			<button onclick="location.href='{{ url_for('communities') }}'" class="sleek-btn compact pill">Your Communities</button>
			{% if name == 'admin' %}
			<button onclick="location.href='{{ url_for('admin') }}'" class="sleek-btn compact pill">Admin Page</button>
			{% endif %}
		</div>
	</div>
	<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
	<script src="{{ url_for('static', filename='script.js') }}"></script>
	<script>
		$(document).ready(function() {
			console.log('Dashboard script loaded');
			
			// Simple and reliable menu toggle
			$('.menu-btn').on('click', function(e) {
				e.preventDefault();
				e.stopPropagation();
				console.log('Menu clicked');
				$('.dropdown-content').slideToggle(200);
			});
			
			// Close menu only when clicking outside the sidebar area
			$(document).on('click', function(e) {
				const sidebar = $('.sidebar');
				const dropdown = $('.dropdown-content');
				
				// Check if click is outside both sidebar and dropdown
				if (!sidebar.is(e.target) && 
					sidebar.has(e.target).length === 0 && 
					!dropdown.is(e.target) && 
					dropdown.has(e.target).length === 0) {
					dropdown.slideUp(200);
				}
			});
			
			// Close menu on escape key
			$(document).on('keydown', function(e) {
				if (e.key === 'Escape') {
					$('.dropdown-content').slideUp(200);
				}
			});
			
			// Debug info
			console.log('Menu button found:', $('.menu-btn').length);
			console.log('Dropdown found:', $('.dropdown-content').length);
		});
	</script>
</body>
</html>
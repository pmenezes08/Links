<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
	<title>Workout X - Dashboard</title>
	<link rel="stylesheet" href="{{ url_for('static', filename='styles.css') }}?v=2.0">
</head>
<body class="dashboard-page">
	<div class="sidebar">
		<button class="menu-btn">â˜° Menu</button>
		<div class="dropdown-content">
			<a href="/profile">Profile</a>
			{% if session['username'] == 'admin' %}
			<a href="/admin">Admin Dashboard</a>
			<a href="/admin_profile">Admin Profile</a>
			{% endif %}
			<a href="/user_chat">Messages</a>
			<a href="/premium_dashboard">Premium Dashboard</a>
			<a href="/feed">Social</a>
			<a href="/communities">Your Communities</a>
			<a href="/subscribe">Subscribe</a>
			<a href="/logout">Logout</a>
		</div>
	</div>
	<div class="container">
		<h1>Welcome, {{ name }}</h1>
		<div class="dashboard-actions">
			<button onclick="location.href='{{ url_for('feed') }}'" class="sleek-btn compact pill">Social</button>
			<button onclick="location.href='{{ url_for('communities') }}'" class="sleek-btn compact pill">Your Communities</button>
			{% if name == 'admin' %}
			<button onclick="location.href='{{ url_for('admin') }}'" class="sleek-btn compact pill">Admin Page</button>
			{% endif %}
		</div>
	</div>
	<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
	<script src="{{ url_for('static', filename='script.js') }}"></script>
	<script>
		$(document).ready(function() {
			console.log('Dashboard script loaded');
			
			let menuTimeout;
			
			// Show menu on button click
			$('.menu-btn').on('click', function(e) {
				e.preventDefault();
				e.stopPropagation();
				console.log('Menu clicked');
				$('.dropdown-content').slideDown(200);
			});
			
			// Keep menu open when hovering over sidebar
			$('.sidebar').on('mouseenter', function() {
				clearTimeout(menuTimeout);
			});
			
			// Keep menu open when hovering over dropdown
			$('.dropdown-content').on('mouseenter', function() {
				clearTimeout(menuTimeout);
			});
			
			// Close menu when leaving sidebar area
			$('.sidebar').on('mouseleave', function() {
				menuTimeout = setTimeout(function() {
					$('.dropdown-content').slideUp(200);
				}, 300); // 300ms delay before closing
			});
			
			// Close menu when leaving dropdown
			$('.dropdown-content').on('mouseleave', function() {
				menuTimeout = setTimeout(function() {
					$('.dropdown-content').slideUp(200);
				}, 300); // 300ms delay before closing
			});
			
			// Close menu on escape key
			$(document).on('keydown', function(e) {
				if (e.key === 'Escape') {
					$('.dropdown-content').slideUp(200);
				}
			});
			
			// Debug info
			console.log('Menu button found:', $('.menu-btn').length);
			console.log('Dropdown found:', $('.dropdown-content').length);
		});
	</script>
</body>
</html>